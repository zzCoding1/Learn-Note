## 软件设计

### 1. 用例图

#### 1.1 基本概念

1. 组成

   - 参与制：人形图表示
   - 用例：椭圆表示
   - 关系

2. 站在使用者的角度，将整个软件系统描述出来，固定客户的需求

3. 关系

   - 泛化关系：表示同一个业务不同的技术实现

     ![image-20220714212213110](assets/%E8%BD%AF%E4%BB%B6%E8%AE%BE%E8%AE%A1/image-20220714212213110.png)

   - 扩展关系：完成某一功能，偶尔会执行另一个功能

     ![image-20220714212454514](assets/%E8%BD%AF%E4%BB%B6%E8%AE%BE%E8%AE%A1/image-20220714212454514.png)

   - 包含关系：一个用例可以包含其他的用例

     ![image-20220714212306918](assets/%E8%BD%AF%E4%BB%B6%E8%AE%BE%E8%AE%A1/image-20220714212306918.png)

#### 1.2 案例

1. 需求
   - 人事管理系统。
     - 用户：人事管理干部
     - 功能：
       - 人事档案库
       - 人事信息管理
       - 生成报表

### 2. 类图

#### 2.1 基本概念

1. 三行的方块表示，自上而下分别是类名、属性、方法
2. 权限
   - +：表示公有
   - -：表示私有
   - #：表示保护

#### 2.2 类和类之间的关系

1. 泛化（继承）：实线三角

2. 接口（实现）：纯虚函数、抽象类模拟、虚线三角

3. 依赖：虚线箭头表示，A使用B，即A依赖B

   ![image-20220714214345774](assets/%E8%BD%AF%E4%BB%B6%E8%AE%BE%E8%AE%A1/image-20220714214345774.png)

   - 代码实现：B作为A的参数、或者返回值

4. 关联：实现箭头表示

   ![image-20220714215053073](assets/%E8%BD%AF%E4%BB%B6%E8%AE%BE%E8%AE%A1/image-20220714215053073.png)

   - 代码实现：B最为A的成员，作为A的返回值，或者被A使用。

   - 数量问题

     ![image-20220714215743202](assets/%E8%BD%AF%E4%BB%B6%E8%AE%BE%E8%AE%A1/image-20220714215743202.png)

5. 聚合（是一种关联）：表示整体和部分，例如：汽车可以选择**各个型号**的发动机，空心菱形表示

   ![image-20220714215158752](assets/%E8%BD%AF%E4%BB%B6%E8%AE%BE%E8%AE%A1/image-20220714215158752.png)

   

6. 组合（是一种关联）：关系更加强劲，表示**生命的**整体和部分**整体对象负责部分对象的生命周期**，例如人体和五脏六腑实心菱形表示

   ![image-20220714215223928](assets/%E8%BD%AF%E4%BB%B6%E8%AE%BE%E8%AE%A1/image-20220714215223928.png)


#### 2.2 案例

略

### 3. 对象图

#### 3.1 基本概念

1. 是类图的一个实例,用于显示系统执行时的一个可能的快照,即在某一个时间上系统可能出现的样子,对象图用带下划线的对象名称来表示对象.

   ![image-20220714220934690](assets/%E8%BD%AF%E4%BB%B6%E8%AE%BE%E8%AE%A1/image-20220714220934690.png)

### 3. 时序图

#### 3.1 基本概念

1. 用来描述对象间消息的传递

   ![image-20220714221244523](assets/%E8%BD%AF%E4%BB%B6%E8%AE%BE%E8%AE%A1/image-20220714221244523.png)

   ![image-20220714221444338](assets/%E8%BD%AF%E4%BB%B6%E8%AE%BE%E8%AE%A1/image-20220714221444338.png)

2. 组成

   - 对象:矩形表示,对象名称下有下划线,对象位于时序图的顶部说明交互开始时,对象已经存在,如果对象不在顶部,表示过程中被创建
   - 生命线:垂直的虚线表示,表示对象的生命周期
     - 虚线上矩形表示同步
   - 消息:表示对象的消息传递,一般是单向,时序图很少使用返回消息

#### 3.2 案例

1. 练习

   - 函数1 调用 函数2；

   - 函数2 调用 函数3；

   - 函数3返回后，函数2打印日志；

   - 最后函数2运行完毕后，返回到函数1；

2. 答案

   - 同步

     ![image-20220714222432438](assets/%E8%BD%AF%E4%BB%B6%E8%AE%BE%E8%AE%A1/image-20220714222432438.png)

   - 异步

     ![image-20220714222531080](assets/%E8%BD%AF%E4%BB%B6%E8%AE%BE%E8%AE%A1/image-20220714222531080.png)

### 4. 活动图（流程图）

#### 4.1 流程图

​	![image-20220714223947926](assets/%E8%BD%AF%E4%BB%B6%E8%AE%BE%E8%AE%A1/image-20220714223947926.png)

#### 4.1 泳道图

1. 表示两个系统之间的关系

   ![image-20220714224459269](assets/%E8%BD%AF%E4%BB%B6%E8%AE%BE%E8%AE%A1/image-20220714224459269.png)

### 5. 状态图

#### 5.1 基本概念

1. 通过建立对象的生存周期模型来描述对象随时间变化的动态行为

#### 案例

1. 练习

   - 创建(新建)
   - 就绪
   - 运行
   - 阻塞
   - 消亡

2. 答案

   ![image-20220714232250050](assets/%E8%BD%AF%E4%BB%B6%E8%AE%BE%E8%AE%A1/image-20220714232250050.png)

### 6. 协作图

#### 基本概念

1. 表示对象间交互的过程

   ![image-20220714232503245](assets/%E8%BD%AF%E4%BB%B6%E8%AE%BE%E8%AE%A1/image-20220714232503245.png)

   ![image-20220714232520677](assets/%E8%BD%AF%E4%BB%B6%E8%AE%BE%E8%AE%A1/image-20220714232520677.png)

### 7. 包图

#### 7.1 基本概念

1. 表示各个组件之间的关系

   ![image-20220714232743496](assets/%E8%BD%AF%E4%BB%B6%E8%AE%BE%E8%AE%A1/image-20220714232743496.png)

   ![image-20220714232735593](assets/%E8%BD%AF%E4%BB%B6%E8%AE%BE%E8%AE%A1/image-20220714232735593.png)

   - 包没有实例

### 8. 组件图

#### 8.1 基本概念

1. 表示各个组件之间的关系，可以用来设计系统的整体架构

   - 虚线表示依赖

   ![image-20220714232928311](assets/%E8%BD%AF%E4%BB%B6%E8%AE%BE%E8%AE%A1/image-20220714232928311.png)

### 8. 部署图

#### 基本概念

1. 表示软件各个组件驻留在什么硬件位置，以及这些硬件之间的交互关系。

2. 节点：用来表示一种硬件，可以是打印机、计算机等。

   - 符号：三维框，框的左上方包含节点的名称
   - 通信关联：节点通过通信关联建立彼此的关系，采用节点到节点绘制实线表示关联

   ![image-20220714233453141](assets/%E8%BD%AF%E4%BB%B6%E8%AE%BE%E8%AE%A1/image-20220714233453141.png)

   ![image-20220714233852460](assets/%E8%BD%AF%E4%BB%B6%E8%AE%BE%E8%AE%A1/image-20220714233852460.png)

## 设计模式

### 1. 基本原则

#### 1.1 前言

1. 模式：固定的套路解决问题
   - 初学者要记案例
2. 设计模式：软件工程的基础脉络
   - 基础：多态
3. 三大类型：
   - 创建型
     - 用于创建对象
   - 结构型
   - 行为型
4. 学习设计模式的意义
   - 提高职业素养

#### 1.2 设计模式基本原则

- **开闭原则**

  ![image-20220714235255260](assets/%E8%BD%AF%E4%BB%B6%E8%AE%BE%E8%AE%A1/image-20220714235255260.png)

  ~~~C++
  // 繁忙的业务员
  class BankWorker{
  public:
  	void save(){
          cout << "存款" << endl;
      }    
      void moveM(){
          cout << "转账" << endl;
      }    
      void jiaofei(){
          cout << "缴费" << endl;
      }    
  }
  
  void test0()
  {
      BankWorker *bw = new BankWorker();
      bw->jiaofei();
      bw->save();
      bw->moveM();
  }
  
  // 轻松额业务员
  class AvBankWorker{
  public:
      virtual void dothing() = 0;
  }
  
  class SaveBanker : public AvBankWorker
  {
  	virtual void dothing()
      {
          cout << "存款" << endl; 
      }
  }
  
  class MoveBanker : public AvBankWorker
  {
  	virtual void dothing()
      {
          cout << "转账" << endl; 
      }
  }
  
  void test1(){
      AvBankWorker *sb = new SaveBanker();
   	AvBankWorker *bw = new MoveBanker();
      sb->doting();
      bw->doting();
      delete sb;
      delete bw;
  }
  
  int main(){
      //test0();
      test1();
      return 0;
  }
  ~~~

  

- 单依职责原则

- **依赖倒置原则**

  - 依赖抽象，不依赖具体的实现，也就是针对接口编程。

- 接口隔离原则

- 里式替换原则

- 优先使用组合而不是继承

- **迪米特法则**
